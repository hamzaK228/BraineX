const API_BASE_URL='http://localhost:3000/api';document.addEventListener('DOMContentLoaded',function(){connectToAdminServer();setupAllButtonHandlers();});async function connectToAdminServer(){document.body.dataset.adminLoading='true';try{const[fields,scholarships,mentors]=await Promise.all([fetch(`${API_BASE_URL}/fields`).then(r=>r.ok ? r.json():null).catch(()=>null),fetch(`${API_BASE_URL}/scholarships`).then(r=>r.ok ? r.json():null).catch(()=>null),fetch(`${API_BASE_URL}/mentors`).then(r=>r.ok ? r.json():null).catch(()=>null)]);if(fields && fields.fields){localStorage.setItem('fields',JSON.stringify(fields.fields));}if(scholarships && scholarships.scholarships){localStorage.setItem('scholarships',JSON.stringify(scholarships.scholarships));}if(mentors && mentors.mentors){localStorage.setItem('mentors',JSON.stringify(mentors.mentors));}}catch(error){}finally{delete document.body.dataset.adminLoading;}}function setupAllButtonHandlers(){document.addEventListener('click',function(e){const btn=e.target.closest('button,.btn,.category-card,.track-card,.benefit-card');if(btn && !btn.disabled){btn.style.transform='scale(0.95)';setTimeout(()=>{btn.style.transform='';},150);}});}function toggleMenu(){const menu=document.getElementById('navMenu');menu.classList.toggle('active');}document.querySelectorAll('.nav-menu a').forEach(link=>{link.addEventListener('click',()=>{const menu=document.getElementById('navMenu');if(menu.classList.contains('active')){menu.classList.remove('active');}});});function scrollSlider(direction){const slider=document.getElementById('tracksSlider');const scrollAmount=400;if(direction==='left'){slider.scrollBy({left:-scrollAmount,behavior:'smooth'});}else{slider.scrollBy({left:scrollAmount,behavior:'smooth'});}}document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){e.preventDefault();const target=document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth',block:'start'});}});});const observerOptions={threshold:0.1,rootMargin:'0px 0px-50px 0px'};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.opacity='1';entry.target.style.transform='translateY(0)';}});},observerOptions);document.querySelectorAll('.category-card,.benefit-card,.track-card').forEach(el=>{el.style.opacity='0';el.style.transform='translateY(20px)';el.style.transition='all 0.6s ease-out';observer.observe(el);});let currentModal=null;function openModal(modalId){closeModal();//Close any open modal first currentModal=document.getElementById(modalId);if(currentModal){currentModal.classList.add('show');document.body.style.overflow='hidden';const form=currentModal.querySelector('form');if(form){form.reset();clearErrors();}}}function closeModal(){if(currentModal){currentModal.classList.remove('show');document.body.style.overflow='auto';currentModal=null;}}function switchToLogin(){closeModal();openModal('loginModal');}function switchToSignup(){closeModal();openModal('signupModal');}document.addEventListener('click',(e)=>{if(e.target.classList.contains('modal')){closeModal();}});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'){closeModal();}});document.addEventListener('DOMContentLoaded',function(){const loginLink=document.querySelector('a[href="#login"]');if(loginLink){loginLink.addEventListener('click',function(e){e.preventDefault();openModal('loginModal');});}const signupLink=document.querySelector('a[href="#signup"]');if(signupLink){signupLink.addEventListener('click',function(e){e.preventDefault();openModal('signupModal');});}const heroCta=document.querySelector('.hero .btn-primary');if(heroCta){heroCta.addEventListener('click',function(e){e.preventDefault();openModal('signupModal');});}});function togglePassword(inputId){const input=document.getElementById(inputId);const button=input.nextElementSibling;if(input.type==='password'){input.type='text';button.textContent='ðŸ™ˆ';}else{input.type='password';button.textContent='ðŸ‘ï¸';}}function validateEmail(email){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(email);}function validatePassword(password){return password.length>=6;}function showError(fieldId,message){const field=document.getElementById(fieldId);const errorElement=document.getElementById(fieldId+'Error');if(field && errorElement){field.classList.add('error');errorElement.textContent=message;errorElement.classList.add('show');}}function clearError(fieldId){const field=document.getElementById(fieldId);const errorElement=document.getElementById(fieldId+'Error');if(field && errorElement){field.classList.remove('error');errorElement.classList.remove('show');}}function clearErrors(){document.querySelectorAll('.error-message').forEach(error=>{error.classList.remove('show');});document.querySelectorAll('input,select').forEach(field=>{field.classList.remove('error');});}document.getElementById('loginForm').addEventListener('submit',function(e){e.preventDefault();const email=document.getElementById('loginEmail').value;const password=document.getElementById('loginPassword').value;const rememberMe=document.getElementById('rememberMe').checked;let isValid=true;clearErrors();if(!email){showError('loginEmail','Email is required');isValid=false;}else if(!validateEmail(email)){showError('loginEmail','Please enter a valid email address');isValid=false;}if(!password){showError('loginPassword','Password is required');isValid=false;}else if(!validatePassword(password)){showError('loginPassword','Password must be at least 6 characters');isValid=false;}if(isValid){const submitBtn=this.querySelector('.btn-submit');submitBtn.classList.add('loading');submitBtn.disabled=true;setTimeout(()=>{const userData={email:email,loginTime:new Date().toISOString(),rememberMe:rememberMe};if(rememberMe){localStorage.setItem('edugateway_user',JSON.stringify(userData));}else{sessionStorage.setItem('edugateway_user',JSON.stringify(userData));}document.getElementById('loginSuccess').classList.add('show');updateUIForLoggedInUser(email);setTimeout(()=>{closeModal();showWelcomeMessage(email);},1500);submitBtn.classList.remove('loading');submitBtn.disabled=false;},2000);}});document.getElementById('signupForm').addEventListener('submit',function(e){e.preventDefault();const firstName=document.getElementById('firstName').value;const lastName=document.getElementById('lastName').value;const email=document.getElementById('signupEmail').value;const password=document.getElementById('signupPassword').value;const confirmPassword=document.getElementById('confirmPassword').value;const field=document.getElementById('fieldOfInterest').value;const agreeTerms=document.getElementById('agreeTerms').checked;const newsletter=document.getElementById('newsletter').checked;let isValid=true;clearErrors();if(!firstName.trim()){showError('firstName','First name is required');isValid=false;}if(!lastName.trim()){showError('lastName','Last name is required');isValid=false;}if(!email){showError('signupEmail','Email is required');isValid=false;}else if(!validateEmail(email)){showError('signupEmail','Please enter a valid email address');isValid=false;}if(!password){showError('signupPassword','Password is required');isValid=false;}else if(!validatePassword(password)){showError('signupPassword','Password must be at least 6 characters');isValid=false;}if(!confirmPassword){showError('confirmPassword','Please confirm your password');isValid=false;}else if(password !==confirmPassword){showError('confirmPassword','Passwords do not match');isValid=false;}if(!field){showError('fieldOfInterest','Please select your field of interest');isValid=false;}if(!agreeTerms){alert('Please agree to the Terms of Service and Privacy Policy');isValid=false;}if(isValid){const submitBtn=this.querySelector('.btn-submit');submitBtn.classList.add('loading');submitBtn.disabled=true;setTimeout(()=>{const userData={firstName:firstName,lastName:lastName,email:email,field:field,newsletter:newsletter,signupTime:new Date().toISOString()};localStorage.setItem('edugateway_user',JSON.stringify(userData));document.getElementById('signupSuccess').classList.add('show');updateUIForLoggedInUser(email,firstName);setTimeout(()=>{closeModal();showWelcomeMessage(firstName+' '+lastName);},1500);submitBtn.classList.remove('loading');submitBtn.disabled=false;},2000);}});function socialLogin(provider){const providerNames={google:'Google',facebook:'Facebook',linkedin:'LinkedIn'};alert(`${providerNames[provider]}login would redirect to ${provider}OAuth. This is a demo version.`);setTimeout(()=>{const userData={email:`user@${provider}.com`,firstName:'Demo',lastName:'User',loginTime:new Date().toISOString(),provider:provider};localStorage.setItem('edugateway_user',JSON.stringify(userData));updateUIForLoggedInUser(userData.email,userData.firstName);closeModal();showWelcomeMessage(userData.firstName+' '+userData.lastName);},1000);}function forgotPassword(){const email=prompt('Please enter your email address:');if(email && validateEmail(email)){alert('Password reset link has been sent to your email address.');}else if(email){alert('Please enter a valid email address.');}}function updateUIForLoggedInUser(email,firstName=null){const authButtons=document.querySelector('.auth-buttons');const displayName=firstName || email.split('@')[0];authButtons.innerHTML=`<div class="user-menu"><span class="welcome-text">Welcome,${displayName}</span><button class="btn btn-outline" onclick="logout()">Logout</button></div>`;}function showWelcomeMessage(name){const welcomeDiv=document.createElement('div');welcomeDiv.className='welcome-notification';welcomeDiv.innerHTML=`<div class="notification-content"><h3>ðŸŽ‰ Welcome to MentoraX!</h3><p>Hi ${name},you're now ready to explore scholarships and opportunities!</p><button onclick="this.parentElement.parentElement.remove()">Got it!</button></div>`;welcomeDiv.style.cssText=` position:fixed;top:100px;right:20px;z-index:2000;background:white;border:2px solid #667eea;border-radius:12px;padding:1.5rem;box-shadow:0 10px 30px rgba(0,0,0,0.2);max-width:300px;animation:slideInRight 0.5s ease;`;document.body.appendChild(welcomeDiv);setTimeout(()=>{if(welcomeDiv.parentNode){welcomeDiv.remove();}},5000);}function logout(){localStorage.removeItem('edugateway_user');sessionStorage.removeItem('edugateway_user');const authButtons=document.querySelector('.auth-buttons');authButtons.innerHTML=`<a href="#login" class="btn btn-outline">Log In</a><a href="#signup" class="btn btn-primary">Sign Up</a>`;authButtons.querySelector('a[href="#login"]').addEventListener('click',function(e){e.preventDefault();openModal('loginModal');});authButtons.querySelector('a[href="#signup"]').addEventListener('click',function(e){e.preventDefault();openModal('signupModal');});alert('You have been logged out successfully.');}document.addEventListener('DOMContentLoaded',function(){const userData=localStorage.getItem('edugateway_user')|| sessionStorage.getItem('edugateway_user');if(userData){const user=JSON.parse(userData);updateUIForLoggedInUser(user.email,user.firstName);}initializeAuthButtons();});function initializeAuthButtons(){const loginBtn=document.querySelector('a[href="#login"]');const signupBtn=document.querySelector('a[href="#signup"]');const getStartedBtn=document.querySelector('a[href="#signup"].btn-primary');if(loginBtn){loginBtn.addEventListener('click',function(e){e.preventDefault();openModal('loginModal');});}if(signupBtn){signupBtn.addEventListener('click',function(e){e.preventDefault();openModal('signupModal');});}if(getStartedBtn){getStartedBtn.addEventListener('click',function(e){e.preventDefault();openModal('signupModal');});}}window.openModal=function(modalId){closeModal();//Close any open modal first currentModal=document.getElementById(modalId);if(currentModal){currentModal.classList.add('show');document.body.style.overflow='hidden';const form=currentModal.querySelector('form');if(form){form.reset();clearErrors();}}}window.closeModal=function(){if(currentModal){currentModal.classList.remove('show');document.body.style.overflow='auto';currentModal=null;}}window.switchToLogin=function(){closeModal();openModal('loginModal');}window.switchToSignup=function(){closeModal();openModal('signupModal');}function toggleFAQ(questionElement){const faqItem=questionElement.parentElement;const isActive=faqItem.classList.contains('active');document.querySelectorAll('.faq-item').forEach(item=>{item.classList.remove('active');});if(!isActive){faqItem.classList.add('active');}}const searchBtnEl=document.querySelector('.btn-search');if(searchBtnEl)searchBtnEl.addEventListener('click',function(){const field=document.querySelector('.search-input').value;const programType=document.querySelectorAll('.search-input')[1].value;const deadline=document.querySelectorAll('.search-input')[2].value;this.textContent='Searching...';this.disabled=true;setTimeout(()=>{alert(`Searching for ${programType || 'opportunities'}in ${field || 'all fields'}${deadline ? ' with deadline:'+deadline:''}. This would redirect to search results page.`);this.textContent='Find Opportunities';this.disabled=false;},1000);});const additionalStyles=` @keyframes slideInRight{from{opacity:0;transform:translateX(100%);}to{opacity:1;transform:translateX(0);}}.welcome-notification .notification-content h3{margin:0 0 0.5rem 0;color:#667eea;}.welcome-notification .notification-content p{margin:0 0 1rem 0;color:#666;}.welcome-notification .notification-content button{background:#667eea;color:white;border:none;padding:0.5rem 1rem;border-radius:6px;cursor:pointer;font-size:0.9rem;}.user-menu{display:flex;align-items:center;gap:1rem;}.welcome-text{color:white;font-weight:500;}@media(max-width:768px){.user-menu{flex-direction:column;gap:0.5rem;}.welcome-notification{right:10px !important;left:10px !important;max-width:none !important;}}`;const styleSheet=document.createElement('style');styleSheet.textContent=additionalStyles;document.head.appendChild(styleSheet);document.addEventListener('DOMContentLoaded',function(){const filterBtns=document.querySelectorAll('.filter-btn');const scholarshipCards=document.querySelectorAll('.scholarship-card');filterBtns.forEach(btn=>{btn.addEventListener('click',function(){const filter=this.getAttribute('data-filter');filterBtns.forEach(b=>b.classList.remove('active'));this.classList.add('active');scholarshipCards.forEach(card=>{const category=card.getAttribute('data-category');if(filter==='all' || category===filter){card.style.display='block';setTimeout(()=>{card.style.opacity='1';card.style.transform='scale(1)';},100);}else{card.style.opacity='0';card.style.transform='scale(0.8)';setTimeout(()=>{card.style.display='none';},300);}});});});document.querySelectorAll('.btn-connect').forEach(btn=>{btn.addEventListener('click',function(){const mentorName=this.closest('.mentor-card').querySelector('h3').textContent;this.textContent='Connecting...';this.disabled=true;this.setAttribute('aria-busy','true');setTimeout(()=>{alert(`Great! A connection request has been sent to ${mentorName}. They will get back to you within 24 hours.`);this.textContent='Connected âœ“';this.style.background='#28a745';this.disabled=false;this.removeAttribute('aria-busy');},1500);});});document.querySelectorAll('.btn-apply').forEach(btn=>{btn.addEventListener('click',function(){const scholarshipName=this.closest('.scholarship-card').querySelector('h3').textContent;this.textContent='Loading...';this.disabled=true;this.setAttribute('aria-busy','true');setTimeout(()=>{alert(`Redirecting to ${scholarshipName}application page. This would open the scholarship details and application form.`);this.textContent='View Details';this.disabled=false;this.removeAttribute('aria-busy');},1000);});});const roadmapTabs=document.querySelectorAll('.roadmap-tab');const roadmapContents=document.querySelectorAll('.roadmap-content');roadmapTabs.forEach(tab=>{tab.addEventListener('click',function(){const targetTab=this.getAttribute('data-tab');roadmapTabs.forEach(t=>{t.classList.remove('active');t.setAttribute('aria-selected','false');});this.classList.add('active');this.setAttribute('aria-selected','true');roadmapContents.forEach(content=>{if(content.id===targetTab+'-roadmap'){content.style.opacity='0';content.classList.add('active');setTimeout(()=>{content.style.opacity='1';},50);}else{content.classList.remove('active');}});setTimeout(()=>{const timelineItems=document.querySelectorAll(`#${targetTab}-roadmap .timeline-item`);timelineItems.forEach((item,index)=>{item.style.opacity='0';item.style.transform='translateX(-30px)';setTimeout(()=>{item.style.opacity='1';item.style.transform='translateX(0)';},index*100);});},100);});});});document.querySelectorAll('.btn-explore').forEach(btn=>{btn.addEventListener('click',function(){const trackName=this.closest('.track-card').querySelector('h3').textContent;this.textContent='Loading...';this.disabled=true;this.setAttribute('aria-busy','true');setTimeout(()=>{alert(`Exploring ${trackName}track! This would redirect to a detailed page with:\nâ€¢ All related scholarships\nâ€¢ Relevant roadmaps\nâ€¢ Matched mentors\nâ€¢ Success stories\nâ€¢ Resource library`);this.textContent='Explore Track';this.disabled=false;this.removeAttribute('aria-busy');},1000);});});document.querySelectorAll('.category-card').forEach(card=>{card.addEventListener('click',function(){const action=this.querySelector('h3').textContent.toLowerCase();if(action.includes('scholarship')){document.getElementById('scholarships').scrollIntoView({behavior:'smooth'});}else if(action.includes('fields')|| action.includes('explore')){document.getElementById('tracks').scrollIntoView({behavior:'smooth'});}else if(action.includes('project')){alert('Project creation portal coming soon! This would allow you to:\nâ€¢ Submit project proposals\nâ€¢ Find collaborators\nâ€¢ Get funding recommendations\nâ€¢ Connect with mentors');}else if(action.includes('roadmap')){document.getElementById('roadmaps').scrollIntoView({behavior:'smooth'});}});});const searchInputs=document.querySelectorAll('.search-input');let searchTimeout;searchInputs.forEach(input=>{input.addEventListener('input',function(){clearTimeout(searchTimeout);searchTimeout=setTimeout(()=>{if(window.__DEBUG__){console.info('Live search:',this.value);}},300);});});const observerForTimeline=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.opacity='1';entry.target.style.transform='translateX(0)';}});},{threshold:0.1});document.querySelectorAll('.timeline-item').forEach(item=>{item.style.opacity='0';item.style.transform='translateX(-30px)';item.style.transition='all 0.6s ease-out';observerForTimeline.observe(item);});function animateStats(){const stats=document.querySelectorAll('.stat-item h4');stats.forEach(stat=>{const finalNumber=parseInt(stat.textContent.replace(/[^\d]/g,''));const suffix=stat.textContent.replace(/[\d,]/g,'');let currentNumber=0;const increment=finalNumber/50;const updateStat=()=>{if(currentNumber<finalNumber){currentNumber+=increment;const displayNumber=Math.floor(currentNumber).toLocaleString();stat.textContent=displayNumber+suffix;requestAnimationFrame(updateStat);}else{stat.textContent=finalNumber.toLocaleString()+suffix;}};updateStat();});}const statsObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){animateStats();statsObserver.unobserve(entry.target);}});},{threshold:0.5});const aboutSection=document.querySelector('.about');if(aboutSection){statsObserver.observe(aboutSection);}function createParticle(){const hero=document.querySelector('.hero');if(!hero)return;const particle=document.createElement('div');particle.style.cssText=` position:absolute;width:4px;height:4px;background:rgba(255,255,255,0.5);border-radius:50%;top:${Math.random()*100}%;left:${Math.random()*100}%;animation:float ${3+Math.random()*4}s infinite ease-in-out;pointer-events:none;`;hero.appendChild(particle);setTimeout(()=>{particle.remove();},7000);}setInterval(createParticle,500);const floatAnimation=` @keyframes float{0%,100%{transform:translateY(0)rotate(0deg);opacity:0;}10%{opacity:1;}90%{opacity:1;}50%{transform:translateY(-20px)rotate(180deg);}}`;const animationStyle=document.createElement('style');animationStyle.textContent=floatAnimation;document.head.appendChild(animationStyle);document.addEventListener('DOMContentLoaded',function(){const mobileMenuBtn=document.querySelector('.mobile-menu-btn');const navMenu=document.querySelector('.nav-menu');if(mobileMenuBtn){mobileMenuBtn.addEventListener('click',function(){navMenu.classList.toggle('active');const menuItems=navMenu.querySelectorAll('li');if(navMenu.classList.contains('active')){menuItems.forEach((item,index)=>{item.style.animation=`fadeInDown 0.3s ease forwards ${index*0.1}s`;});}});}});function showNotification(message,type='info'){const notification=document.createElement('div');notification.className=`notification ${type}`;notification.innerHTML=`<span>${message}</span><button onclick="this.parentElement.remove()">&times;</button>`;notification.style.cssText=` position:fixed;top:20px;right:20px;background:${type==='success' ? '#28a745':type==='error' ? '#dc3545':'#667eea'};color:white;padding:1rem;border-radius:8px;z-index:3000;display:flex;align-items:center;gap:1rem;animation:slideInRight 0.3s ease;max-width:300px;box-shadow:0 5px 15px rgba(0,0,0,0.2);`;notification.querySelector('button').style.cssText=` background:none;border:none;color:white;font-size:1.2rem;cursor:pointer;padding:0;line-height:1;`;document.body.appendChild(notification);setTimeout(()=>{notification.remove();},5000);}if(!localStorage.getItem('visited_before')){setTimeout(()=>{showNotification('Welcome to MentoraX! Explore scholarships and connect with mentors.','success');localStorage.setItem('visited_before','true');},2000);}