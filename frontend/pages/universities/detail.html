<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>University Detail | BraineX</title>
    <link rel="stylesheet" href="../../assets/css/design-system.css" />
    <link rel="stylesheet" href="../../assets/css/main.css" />
    <link rel="stylesheet" href="../../assets/css/universities/style.css" />
    <style>
      .hero-banner {
        background: linear-gradient(135deg, var(--uni-primary) 0%, #312e81 100%);
        color: white;
        padding: 4rem 2rem;
        border-radius: 0 0 1rem 1rem;
        margin-bottom: 2rem;
      }

      .detail-card {
        background: var(--uni-card-bg);
        border: 1px solid var(--uni-card-border);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
        margin-top: 2rem;
      }
    </style>
  </head>

  <body>
    <header>
      <div class="container">
        <nav style="padding: 1rem 0">
          <a href="index.html" class="btn btn-outline">&larr; Back to List</a>
        </nav>
      </div>
    </header>

    <div id="content" class="container">
      <!-- Content injected by JS -->
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', async () => {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');

        if (!id) {
          window.location.href = 'index.html';
          return;
        }

        try {
          const response = await fetch('../../data/universities.json');
          const data = await response.json();
          const uni = data.find((u) => u.id === id);

          if (uni) render(uni);
        } catch (error) {
          console.error(error);
        }
      });

      function render(uni) {
        document.title = `${uni.name} | BraineX`;
        document.getElementById('content').innerHTML = `
                <div class="hero-banner">
                    <div style="display:flex; gap:2rem; align-items:center">
                        <img src="${uni.logo}" style="width:120px; height:120px; background:white; padding:1rem; border-radius:1rem;">
                        <div>
                            <h1 style="font-size:2.5rem; margin-bottom:0.5rem">${uni.name}</h1>
                            <p style="font-size:1.25rem; opacity:0.9">${uni.location.city}, ${uni.location.country}</p>
                        </div>
                    </div>
                </div>

                <div class="detail-card">
                    <h2>About</h2>
                    <p style="font-size:1.1rem; line-height:1.8">${uni.description}</p>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <h3>Ranking</h3>
                            <p style="font-size:2rem; font-weight:bold; color:var(--uni-primary)">#${uni.ranking}</p>
                        </div>
                        <div class="stat-box">
                            <h3>Tuition</h3>
                            <p style="font-size:2rem; font-weight:bold">$${uni.tuition.toLocaleString()}</p>
                        </div>
                        <div class="stat-box">
                            <h3>Acceptance</h3>
                            <p style="font-size:2rem; font-weight:bold">${uni.acceptance_rate}%</p>
                        </div>
                        <div class="stat-box">
                            <h3>Type</h3>
                            <p style="font-size:2rem; font-weight:bold">${uni.type}</p>
                        </div>
                    </div>
                </div>

                <div class="detail-card">
                    <h2>Academic Programs</h2>
                    <div class="uni-tags" style="margin-top:1rem">
                        ${uni.programs.map((p) => `<span class="uni-tag" style="font-size:1rem; padding:0.5rem 1rem">${p}</span>`).join('')}
                    </div>
                </div>

                 <div class="detail-card">
                    <h2>Admission Stats</h2>
                    <p><strong>SAT Range:</strong> ${uni.scores.sat}</p>
                    <p><strong>ACT Range:</strong> ${uni.scores.act}</p>
                </div>
            `;
      }
    </script>
  </body>
</html>
